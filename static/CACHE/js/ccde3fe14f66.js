function show_form_errors(fieldname,error){var input=$("#id_"+fieldname),error_msg=$("<span />").addClass("help-inline ajax-error").text(error[0]);error_msg.insertAfter(input);}
function clear_form_errors(form){$(".ajax-error",$(form)).remove();}
function load_sprint(sprint_id){sprint_id=sprint_id||"";$('#active-sprint').load('/sprint/'+sprint_id);$('#objective-form').load('/objective-form/'+sprint_id);$('#objective-list').load('/objectives/'+sprint_id);}
$(document).ready(function(){load_sprint();$('#objective-form').submit(function(e){e.preventDefault();clear_form_errors(this);$.ajax({data:$(this).serialize(),type:$(this).attr('method'),url:$(this).attr('action'),success:function(data,textStatus,jqXHR){$('#id_name').val('');$('#id_description').val('');$('.objective-list').load('/objectives/'+$('#id_sprint').val());},error:function(data,textStatus,jqXHR){var errors=$.parseJSON(data.responseText);$.each(errors,function(index,value){show_form_errors(index,value);});}});return false;});});